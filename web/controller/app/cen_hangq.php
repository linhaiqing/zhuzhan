<?phpnamespace app;use move\db;use move\ext\page;class cen_hangq extends home{	public function __construct()	{		parent::__construct();	}	public function index()	{		$this->keywords = iv('get.content');		$where = [];		if (preg_match("/[\x7f-\xff]/", $this->keywords)) {			$where["title#like"] = "%" . $this->keywords . "%";		} else {			$where["name#like"] = "%" . $this->keywords . "%";		}		$where["status"] = 1;		$res = parent::pullpage("cen_hangq", $where, 'addtime desc', 10);		$coin_hq = $res['list'];		$coin_hq1 = $this->number($coin_hq);		$res['list'] = $coin_hq1;		ajax($res, 1);	}	public function all()	{		$coin_list = db::table('cen_hangq')->where(['status' => 1])->order("`sort` asc")->select();		$this->assign('coin_list', $coin_list);		$this->display();	}	public function detail()	{		$coin_name = iv('get.name', 'w', '参数错误', 1);		$coin = db::table('cen_hangq')->where(['name' => $coin_name])->find();		ajax($coin, 1);	}	public function number($num)	{		foreach ($num as $k => $v) {			if ($v['zl']) {				$lstr = strlen($v['zl']);				if (1 < $lstr && $lstr <= 4) {					$num[$k]['z'] = $v['zl'] . '元';				} elseif (5 <= $lstr && $lstr <= 8) {					$lstr = $lstr - 4;					$num[$k]['z'] = substr($v['zl'], 0, $lstr) . '.' . substr($v['zl'], -3, 1) . substr($v['zl'], -2, 1) . '万';				} elseif ($lstr <= 12 && $lstr >= 9) {					$lstr = $lstr - 8;					$num[$k]['z'] = substr($v['zl'], 0, $lstr) . '.' . substr($v['zl'], -8, 1) . substr($v['zl'], -7, 1) . '亿';				} elseif ($lstr >= 13) {					$lstr = $lstr - 12;					$num[$k]['z'] = substr($v['zl'], 0, $lstr) . '.' . substr($v['zl'], -12, 1) . substr($v['zl'], -11, 1) . '兆';				}			}		}		return $num;	}} 