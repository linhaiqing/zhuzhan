<?phpnamespace app;use Move\db;class qiandao extends home{	public function __construct()	{		parent::__construct();	}	public function log()	{		$this->userid = $this->userid();		if (!$this->userid) {			ajax('请登录');		}		$where = ["userid" => $this->userid];		$res = parent::pullpage("qiandao", $where, "id desc", 10);		foreach ($res["list"] as $k => $v) {			$res["list"][$k]["addtime"] = addtime($res["list"][$k]["addtime"]);		}		ajax($res, 1);	}	public function index1()	{		$where = [];		$res = parent::pullpage("qiandao_award", $where, "id desc", 10);		ajax($res, 1);	}	public function index()	{		$where["status"] = 1;		$res["award"] = db::table("qiandao_award")->where($where)->select();		$strtime = strtotime(addtime(time(), "y-m-01"));		$this->userid = $this->userid(1);		if ($this->userid) {			$res["log"] = db::table("qiandao")->where(["addtime#>=" => $strtime, "userid" => $this->userid])->select();			foreach ($res["log"] as $k => $v) {				$res["log"][$k]["addtime"] = addtime($res["log"][$k]["addtime"], "y-m-d");			}		}		ajax($res, 1);	}	public function up()	{		$this->userid = $this->userid();		if (!$this->userid) {			ajax("请先登录");		}		$res = md('qiandao')->up($this->userid);		if (isset($res[1]) && $res[1]) {			ajax($res[0], 1);		} else {			ajax($res[0]);		}	}} 