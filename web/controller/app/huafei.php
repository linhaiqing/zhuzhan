<?phpnamespace app;use Move\db;class huafei extends home{	public function __construct()	{		parent::__construct();	}	public function index()	{		$res["coinpay"] = db::table("huafei_cointype")->where(["status" => 1])->select();		$res["type"] = db::table("huafei_type")->where(["status" => 1])->select();		ajax($res, 1);	}	public function log()	{		$this->userid = $this->userid();		if (!$this->userid) {			ajax('请登录', -99);		}		$where["userid"] = $this->userid;		$res = parent::pullpage("huafei_log", $where, "id desc", 10);		foreach ($res["list"] as $k => $v) {			$res["list"][$k]["addtime"] = addtime($res["list"][$k]["addtime"]);			$res["list"][$k]["endtime"] = addtime($res["list"][$k]["endtime"]);		}		ajax($res, 1);	}	public function up()	{		$this->userid = $this->userid();		if (!$this->userid) {			ajax('请登录', -99);		}		$price = iv('post.price', 'd', '充值金额格式错误');		$cointype = iv('post.cointype', 'd', '充值币种格式错误');		$moble = iv('post.moble', 'moble', '手机号格式错误');		$paypassword = iv('post.paypassword', 'password', '交易密码格式错误');		$user = db::table("user")->where(["id" => $this->userid])->find();		if (empty($user['paypassword'])) {			ajax('交易密码非法');		}		if (hashs($paypassword) != $user['paypassword']) {			ajax('交易密码错误');		}		$res = md('huafei')->up($this->userid, $price, $cointype, $moble);		if (isset($res[1]) && $res[1]) {			ajax($res[0], 1);		} else {			ajax($res[0]);		}	}}