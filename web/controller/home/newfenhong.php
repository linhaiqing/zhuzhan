<?phpnamespace home;use Move\db;use Move\ext\speal;use Move\ext\page;class newfenhong extends home{	public function __construct()	{		parent::__construct();		$this->is_login();		$this->is_goole();	}	public function index()	{		$this->hints = $this->get_text('newfenhong', '新分红中心');		$this->seos = $this->get_seo('newfenhong', '新分红中心');		$count = db::table("newfenhong")->where(["status" => 2])->count();		$PageObj = new page($count, 5);		$show = $PageObj->show();		$list = db::table("newfenhong")->where(["status" => 2])->order("sort asc,addtime desc")->limit($PageObj->firstRow, $PageObj->listRows)->select();		foreach ($list as $k => $v) {			$list[$k]['week'] = $this->week($v['week']);		}		$pages = ['show' => $show, 'list' => $list];		$this->assign('pages', $pages);		$this->display();	}	public function buy()	{		$id = iv('get.id', 'd', '参数错误');		$this->hints = $this->get_text('newfenhong_buy', '立即分红');		$this->seos = $this->get_seo('newfenhong_buy', '立即分红');		$list = db::table("newfenhong")->where(["status" => 2, "id" => $id])->find();		$list['week'] = $this->week($list['week']);		$this->assign('list', $list);		$this->display();	}	public function log()	{		$this->hints = $this->get_text('newfenhong_log', '分红记录');		$this->seos = $this->get_seo('newfenhong_log', '分红记录');		$count = db::table("newfenhong_log")->where(["status" => 1, "userid" => session("userid")])->count();		$PageObj = new page($count, 5);		$show = $PageObj->show();		$list = db::table("newfenhong_log")->where(["userid" => session("userid"), "status" => 1])->order("sort asc,addtime desc")->limit($PageObj->firstRow, $PageObj->listRows)->select();		$pages = ['show' => $show, 'list' => $list];		$this->assign('pages', $pages);		$this->display();	}	public function week($str)	{		if ($str) {			$str = rtrim($str, ',');			$arr = explode(',', $str);			$newstr = '';			$weekstr = '';			foreach ($arr as $v) {				if ($v == 1) {					$weekstr = '星期一';				}				if ($v == 2) {					$weekstr = '星期二';				}				if ($v == 3) {					$weekstr = '星期三';				}				if ($v == 4) {					$weekstr = '星期四';				}				if ($v == 5) {					$weekstr = '星期五';				}				if ($v == 6) {					$weekstr = '星期六';				}				if ($v == 7) {					$weekstr = '星期天';				}				$newstr .= $weekstr . "  ";			}			return $newstr;		}	}}