<?phpnamespace home;use Move\db;use Move\ext\page;class vote extends home{	public function __construct()	{		parent::__construct();		$this->is_game('vote');	}	public function index()	{		$this->set_title('新币投票');		$where = [];		$count = db::table("vote")->where($where)->count();		$PageObj = new page($count, 15);		$show = $PageObj->show();		$list = db::table("vote")->where($where)->order("`id` desc")->limit($PageObj->firstRow, $PageObj->listRows)->select();		$pages = ['show' => $show, 'list' => $list];		$this->assign('pages', $pages);		$this->display();	}	public function up()	{		$this->check_up('新币投票');		$id = iv('post.id', 'd', '参数错误');		$type = iv('post.type', 'd', '参数错误');		$ext = iv('post.ext', 'a', '参数错误');		if (!$type || !check($type, "d") && $type != 1 && $type != 2) {			ajax("投票类型格式错误");		}		if (!$ext || !check($ext, "a") || mb_strlen($ext) > 20) {			ajax("投票原因格式错误");		}		if (!$this->userid) {			ajax('请先登录');		}		$res = md('vote')->up($this->userid, $id, $type, $ext);		if (isset($res[1]) && $res[1]) {			ajax($res[0], 1);		} else {			ajax($res[0]);		}	}}